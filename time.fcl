/*
سلسلة قواعد النظام الخبير المسؤولة عن حساب زمن الاحرف
*/
FUNCTION_BLOCK TIME
//دخل النظام : رقم الحرف، متوسط زمن و الانحراف المعياري لكل فئة زمنية : قصيرة، متوسطة، و طويلة
VAR_INPUT
//الحرف الذي نود حساب زمنه
	CHAR_ID:REAL;
END_VAR

//الخرج : زمن الحرف
VAR_OUTPUT
	CHAR_TIME:REAL;
END_VAR

//توابع الانتماء للمجموعات
FUZZIFY CHAR_ID
	//TERM EMPTY:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM STOPS:= (1,1)(2,1)(3,1)(4,1)(5,1)(6,1)(7,1)(8,1)(9,1)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM FRICATIVES:=  (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,1)(11,1)(12,1)(13,1)(14,1)(15,1)(16,1)(17,1)(18,1)(19,1)(20,1)(21,1)(22,1)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM NASAL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,1)(24,1)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM TRILL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,1)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM LATERAL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,1)(27,0.5)(28,0.5)(29,0.0001);
	TERM SEMIVOWEL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.25)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.25)(24,0.25)(25,0.25)(26,0.25)(27,1)(28,1)(29,1);
	TERM VOICED:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,1)(7,1)(8,1)(9,1)(10,0.0001)(11,1)(12,0.0001)(13,1)(14,1)(15,0.0001)(16,1)(17,1)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,1)(24,1)(25,1)(26,1)(27,1)(28,1)(29,1);
	TERM UNVOICED:= (1,1)(2,1)(3,1)(4,1)(5,1)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,1)(11,0.0001)(12,1)(13,0.0001)(14,0.0001)(15,1)(16,0.0001)(17,0.0001)(18,1)(19,1)(20,1)(21,1)(22,1)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM BILABIAL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,1)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,1)(29,0.0001);
	TERM LABIODENTAL:=  (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,1)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM INTERDENTAL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,1)(14,1)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,1)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM ALVEODENTAL:=  (1,0.0001)(2,1)(3,1)(4,0.0001)(5,0.0001)(6,1)(7,1)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,1)(17,0.0001)(18,0.0001)(19,0.0001)(20,1)(21,1)(22,0.0001)(23,1)(24,0.0001)(25,1)(26,1)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM PALATAL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,1)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,1)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,1)(28,0.0001)(29,0.0001);
	TERM VELAR:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,1)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,1)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM UVULAR:= (1,0.0001)(2,0.0001)(3,0.0001)(4,1)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,0.0001)(12,0.0001)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,1)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM PHARYNGEAL:= (1,0.0001)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,0.0001)(11,1)(12,1)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.0001)(21,0.0001)(22,0.0001)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
	TERM LARYNGEAL:=  (1,1)(2,0.0001)(3,0.0001)(4,0.0001)(5,0.0001)(6,0.0001)(7,0.0001)(8,0.0001)(9,0.0001)(10,1)(11,0.50)(12,0.50)(13,0.0001)(14,0.0001)(15,0.0001)(16,0.0001)(17,0.0001)(18,0.0001)(19,0.0001)(20,0.50)(21,0.50)(22,0.50)(23,0.0001)(24,0.0001)(25,0.0001)(26,0.0001)(27,0.0001)(28,0.0001)(29,0.0001);
END_FUZZIFY

DEFUZZIFY CHAR_TIME
	TERM LONG :=GAUSS 140 10;
	TERM MEDIUM := GAUSS 100 10;
	TERM SHORT := GAUSS 60 10;
	METHOD : COG;
	//DEFAULT := 100;
END_DEFUZZIFY

RULEBLOCK TIME_FUNCTION
	AND : MIN;
	ACT : MIN;
	ACCU : MAX;
	 
	RULE 1 : IF (CHAR_ID IS LARYNGEAL) OR ((CHAR_ID IS STOPS) AND ((CHAR_ID IS UNVOICED) OR (CHAR_ID IS ALVEODENTAL))) THEN CHAR_TIME IS SHORT;
	RULE 2 : IF (((CHAR_ID IS STOPS)AND((CHAR_ID IS BILABIAL)OR(CHAR_ID IS PALATAL)))OR((CHAR_ID IS FRICATIVES)AND(NOT (CHAR_ID IS LARYNGEAL)))OR(CHAR_ID IS NASAL)OR(CHAR_ID IS TRILL)OR(CHAR_ID IS LATERAL)) THEN CHAR_TIME IS MEDIUM;
	RULE 3 : IF (CHAR_ID IS SEMIVOWEL) THEN CHAR_TIME IS LONG;

END_RULEBLOCK
END_FUNCTION_BLOCK
